<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">

  <class name ="beans.Village, beans" table="villages_common" lazy="false">

    <id name="ID" column="id" type="Int32">
      <generator class="identity"/>
    </id>
    
    <property name="Name" column="name" length="100" type="String"/>
    <property name="X" column="x" type="Int32" />
    <property name="Y" column="y" type="Int32" />
    <many-to-one name="Owner" class="beans.Player, beans" column="userid" not-null="false" fetch="join" cascade="none" />
    <property name="Points" column="points" type="float" />
    <property name="Loyal" column="loyal" type="float" />
    <property name="LastUpdate" column="last_update" type="timestamp" not-null="true" />
    <property name="Population" column="population" type="float" />
    <one-to-one name="Buildings" class="beans.VillageBuildingData, beans" cascade="all" />
    <one-to-one name="Resources" class="beans.VillageResourcesData, beans" cascade="all" />
    <one-to-one name="Research" class="beans.VillageReseachData, beans" cascade="all" />
    <one-to-one name="Troop" class="beans.VillageTroopData, beans" cascade="all" />
    
  </class>

  <class name ="beans.VillageBuildingData, beans" table="villages_building" lazy="true">
    <id name="ID" column="id">
      <generator class="foreign">
        <param name="property">Village</param>
      </generator>
    </id>
    <property name="Headquarter" column="headquarter" type="Int32" />
    <property name="Barracks" column="barracks" type="Int32" />
    <property name="Stable" column="stable" type="Int32" />
    <property name="Workshop" column="workshop" type="Int32" />
    <property name="Academy" column="academy" type="Int32" />
    <property name="Smithy" column="smithy" type="Int32" />
    <property name="Rally" column="rally" type="Int32" />
    <property name="Market" column="market" type="Int32" />
    <property name="ClayPit" column="claypit" type="Int32" />
    <property name="IronMine" column="ironmine" type="Int32" />
    <property name="TimberCamp" column="timbercamp" type="Int32" />
    <property name="Warehouse" column="storage" type="Int32" />
    <property name="Farm" column="farm" type="Int32" />
    <property name="HidingPlace" column="hide" type="Int32" />
    <property name="Wall" column="wall" type="Int32" />

    <one-to-one name="Village" class="beans.Village, beans" constrained="true" property-ref="Buildings" foreign-key="id" />
  </class>

  <class name ="beans.VillageReseachData, beans" table="villages_research" lazy="true">
    <id name="ID" column="id" type="Int32">
      <generator class="foreign">
        <param name="property">Village</param>
      </generator>
    </id>
    <property name="Attack" column="attack" type="Int32" />
    <property name="Defense" column="defense" type="Int32" />
    <property name="TroopSpeed" column="unit_speed" type="Int32" />
    <property name="VillageSpeed" column="village_speed" type="Int32" />

    <one-to-one name="Village" class="beans.Village, beans" constrained="true" property-ref="Research" />
  </class>

  <class name ="beans.VillageResourcesData, beans" table="villages_resources" lazy="true">
    <id name="ID" column="id" type="Int32">
      <generator class="foreign">
        <param name="property">Village</param>
      </generator>
    </id>
    <property name="Clay" column="clay" type="Int32" />
    <property name="Wood" column="wood" type="Int32" />
    <property name="Iron" column="iron" type="Int32" />

    <one-to-one name="Village" class="beans.Village, beans" foreign-key="id" constrained="true"/>
    
  </class>

  <class name ="beans.VillageTroopData, beans" table="villages_troop" lazy="true">
    <id name="ID" column="id" type="Int32">
      <generator class="foreign">
        <param name="property">Village</param>
      </generator>
    </id>
    <property name="Spear" column="spear" type="Int32" />
    <property name="Sword" column="sword" type="Int32" />
    <property name="Axe" column="axe" type="Int32" />
    <property name="Scout" column="scout" type="Int32" />
    <property name="Light" column="light" type="Int32" />
    <property name="Heavy" column="heavy" type="Int32" />
    <property name="Catapult" column="catapult" type="Int32" />
    <property name="Ram" column="ram" type="Int32" />
    <property name="Noble" column="noble" type="Int32" />
    
    <property name="InVillageSpear" column="in_spear" type="Int32" />
    <property name="InVillageSword" column="in_sword" type="Int32" />
    <property name="InVillageAxe" column="in_axe" type="Int32" />
    <property name="InVillageScout" column="in_scout" type="Int32" />
    <property name="InVillageLight" column="in_light" type="Int32" />
    <property name="InVillageHeavy" column="in_heavy" type="Int32" />
    <property name="InVillageCatapult" column="in_catapult" type="Int32" />
    <property name="InVillageRam" column="in_ram" type="Int32" />
    <property name="InVillageNoble" column="in_noble" type="Int32" />

    <property name="TotalSpear" column="total_spear" type="Int32" />
    <property name="TotalSword" column="total_sword" type="Int32" />
    <property name="TotalAxe" column="total_axe" type="Int32" />
    <property name="TotalScout" column="total_scout" type="Int32" />
    <property name="TotalLight" column="total_light" type="Int32" />
    <property name="TotalHeavy" column="total_heavy" type="Int32" />
    <property name="TotalCatapult" column="total_catapult" type="Int32" />
    <property name="TotalRam" column="total_ram" type="Int32" />
    <property name="TotalNoble" column="total_noble" type="Int32" /

    <one-to-one name="Village" class="beans.Village, beans" constrained="true" property-ref="Troop" />
  </class>


</hibernate-mapping>